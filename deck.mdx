import { CodeSurfer } from "mdx-deck-code-surfer"

export { theme } from './theme';

<Image src='/logo.png' size='600px auto'>
  <h1>Entendendo JavaScript</h1>
</Image>

---
import { Image } from 'mdx-deck'

<Image src='/me.jpg' size='500px auto'>
  <h2>ABOUT ME</h2>
  https://github.com/felipemsantana
</Image>
---

## JAVASCRIPT
<ul style={{ textAlign: 'left' }}>
  <li>first version was created by Brendan Eich in 10 days, in May 1995</li>
  <li>high-level</li>
  <li>weakly typed</li>
  <li>multi-paradigm</li>
  <ul>
    <li>object-oriented (prototype-based)</li>
    <li>imperative</li>
    <li>functional</li>
    <li>event-driven</li>
  </ul>
</ul>

```notes
alto nível, abstrações

tipagem fraca, tipos apenas runtime, pode atribuir diferentes tipos em mesma variável, não há checagem de parâmetros
conversões implícitas, concatenar string com número

orientação a objetos baseados em protótipos, objetos que são acessados por outros objetos

imperativo, executar ações, if/else

funcional, pode criar pure functions, sem side-effect, idempotente
pipe/compose de função
métodos de manipular coleções, map/filter/reduce

event-driven, listeners de ações de usuários, callback de I/O
```

---

## PRIMITIVES
<ul style={{ textAlign: 'left' }}>
  <li>undefined</li>
  <li>null</li>
  <li>string</li>
  <li>number</li>
  <li>boolean</li>
  <li>symbol</li>
</ul>

```notes
primitivos são imutáveis
```
---

<CodeSurfer
  title="ARRAYS, OBJECTS AND FUNCTIONS"
  code={require("!raw-loader!./code/objects.js")}
  lang="javascript"
  steps={[
    {},
  ]}
/>

```notes
todos os tipos que não são primitivos são objetos
objetos são mutáveis
```

---

<CodeSurfer
  title="ASSIGN BY VALUE AND BY REFERENCE"
  code={require("!raw-loader!./code/assignment.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 4] },
    { range: [7, 10] },
    { range: [13, 15] },
    { range: [18, 25] },
    { range: [24, 25] },
  ]}
/>

```notes
para copiar objetos superficialmente pode usar Object.assign ou spread
para copiar completamente melhor usar lib como lodash.merge
```

---

<CodeSurfer
  title="FUNCTIONS ARE OBJECTS"
  code={require("!raw-loader!./code/functions.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 8] },
    { lines: [1, 10, 11, 12] },
  ]}
/>

---

<CodeSurfer
  title="HIGH ORDER FUNCTION"
  code={require("!raw-loader!./code/hof.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 8] },
    { lines: [2, 3, 4, 7] },
    { lines: [3, 8] },
    { range: [10, 13] },
  ]}
/>

---

<CodeSurfer
  title="SCOPE: VAR, LET AND CONST"
  code={require("!raw-loader!./code/scope.js")}
  lang="javascript"
  steps={[
    {},
  ]}
/>

---

<CodeSurfer
  title="HOISTING"
  code={require("!raw-loader!./code/hoisting.js")}
  lang="javascript"
  steps={[
    {},
  ]}
/>

```notes
let e const não são afetados pelo hoisting, lançando ReferenceError se acessados antes de declarar
```
---

<CodeSurfer
  title="IMMEDIATELY INVOKED FUNCTION EXPRESSION"
  code={require("!raw-loader!./code/iife.js")}
  lang="javascript"
  steps={[
    { notes: 'mostly used in browsers to avoid global scope pollution' },
  ]}
/>

---

<CodeSurfer
  title="LEXICAL SCOPE AND CLOSURE"
  code={require("!raw-loader!./code/closure.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 10] },
    { range: [12, 21] },
    { lines: [15, 16, 17, 18, 21] },
    { lines: [13, 15, 16, 17, 18, 22] },
    { lines: [13, 15, 16, 17, 18, 23] },
    { lines: [13, 15, 16, 17, 18, 24] },
    { range: [27, 36] },
    { tokens: { 28: [6], 29: [7] } },
    { tokens: { 28: [8], 30: [6] } },
    { tokens: { 28: [10, 11, 12], 30: [4, 5, 6, 7] } },
    { tokens: { 28: [10, 11, 12] }, lines: [30] },
    { range: [27, 36] },
  ]}
/>

```notes
lexical scope = static scope
```

---

<CodeSurfer
  title="TRUTHY AND FALSY"
  code={require("!raw-loader!./code/falsy.js")}
  lang="javascript"
  steps={[
    {},
  ]}
/>

---

<CodeSurfer
  title="SHORT-CIRCUIT EVALUATION"
  code={require("!raw-loader!./code/short-circuit.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 7] },
    { range: [10, 11] },
    { range: [14, 15] },
    { range: [18, 23] },
    { range: [18, 20], lines: [25, 26, 27] },
    { range: [18, 20], lines: [29, 30] },
  ]}
/>

---

<CodeSurfer
  title="SLOPPY MODE AND STRICT MODE"
  code={require("!raw-loader!./code/strict-mode.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 15] },
    { range: [17, 32] },
  ]}
/>

```notes
Converter erros silenciosos em erros lançados

Atribuir valor sem declarar

Atribuir valor em campos read-only (undefined, NaN, etc)

Sloppy: Valor do this é inferido, vira objeto global se não houver

usando EcmaScript modules sempre será strict-mode
```

---

## Prototypal inheritance
<ul style={{ textAlign: 'left' }}>
  <li>objects inherit from objects (prototypes)</li>
  <li>dynamic, can change in runtime</li>
  <li>prototype chain</li>
  <li>monkey patch, used for polyfills</li>
</ul>

```notes
pode mudar em runtime pois objetos são mutáveis, todos objetos que herdam do protótipo acessam mesma instância modificada
funções possuem propriedade `prototype` que é o objeto protótipo
prototype chain termina com null
```

---

<Image src='/pill.jpg' size='602px auto'>
  <h2>RED PILL (FUNCTION) OR BLUE PILL (CLASS)</h2>
</Image>

---

<CodeSurfer
  title="CONSTRUCTOR FUNCTION"
  code={require("!raw-loader!./code/function-class.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 8] },
    { range: [11, 15], notes: '__proto__ property is returned in Object.getPrototypeOf' },
    { lines: [17], notes: 'Object.create returns a new object that has SuperClass.prototype as the prototype' },
    { lines: [18], notes: 'Set SuperClass as a prototype of SubClass' },
    { range: [21, 23] },
  ]}
/>

```notes
implementação baseada no código transpilado do babel, sem checagem de chamada de super e outras coisas
```

---

<CodeSurfer
  title="CLASS"
  code={require("!raw-loader!./code/class.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 10] },
    { range: [13, 19] },
    { range: [22, 24] },
  ]}
/>

```notes
syntatic sugar
```

---

<CodeSurfer
  title="EXTRA: OBJECT-CREATE"
  code={require("!raw-loader!./code/object-create.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 6] },
    { range: [8, 16] },
    { lines: [2, 3, 4, 10, 11, 12, 13, 14, 16] },
    { range: [18, 28] },
    { lines: [2, 3, 4, 19, 21, 22, 23, 24, 25, 26, 28] },
    {},
  ]}
/>

---

<CodeSurfer
  title="THIS"
  code={require("!raw-loader!./code/this.js")}
  lang="javascript"
  steps={[
    {},
    { range: [1, 11] },
    { range: [1, 13] },
    { range: [15, 16], lines: [2, 3, 9, 10, 11] },
    { lines: [2, 3, 4, 5, 6, 18] },
    { lines: [2, 3, 4, 5, 6, 20, 21, 22, 23] },
    { lines: [2, 3, 4, 5, 6, 25, 26] },
    { range: [28, 33] },
    { lines: [29, 30, 35] },
    { lines: [25, 29, 30, 37] },
    { lines: [29, 30, 31, 39] },
    { lines: [29, 30, 31, 40, 41] },
    {},
  ]}
/>

```notes
dot notation
this no contexto global se refere ao objeto global, window em browsers
falar de document.addEventListener que passa como this o elemento do DOM
```

---

# The end
